#!/bin/env make
#######################################################################################################################
# Makefile to generate the presentation
#
# Targets:
#
#  docs (default) 	Generate the presentation PDF from LaTeX source and diagrams
#  clean         	Remove all interim and target files
#######################################################################################################################
PLANTUML_JAR ?= ../utils/plantuml*.jar

#######################################################################################################################
# Diagram generation
#######################################################################################################################

# Collect all .puml files in docs and map to .svg
PUML_FILES := $(wildcard *.puml)
PNG_FILES := $(PUML_FILES:.puml=.png)

# Pattern rule: build .png from .puml in docs/
%.png: %.puml
	@echo "Generating PNG diagram from $< ..."
	java -jar $(PLANTUML_JAR) -tpng $<

#######################################################################################################################
# docs target: pdf
#######################################################################################################################

docs:  $(PNG_FILES)

#######################################################################################################################
# Delete all interim and target files
#######################################################################################################################
clean:
	rm -f *.png

all: docs

test:

.PHONY: docs clean all test

#######################################################################################################################
# End of file
#######################################################################################################################
